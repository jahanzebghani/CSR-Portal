{% extends "CSRP/base.html" %}
{% load static %} 
{% block title %} Update/Change {% endblock title%} 
{% block content %} 
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="container d-flex align-items-center justify-content-center vh-100">
    <div class="text-center">
      <div class="logo">
        <img src="{% static 'img/NEDlogo.jpg' %}" width="300" height="auto" />
      </div>
      <br>
      <h3>Update/Change Section</h3>
      <br>
      <form method="POST" action="{% url 'updatesection' %}">
        {% csrf_token %}
        <label for="menu" style="font-weight: bold;">Status:</label>
      <input type="hidden" id="requistionid" name="requistionid" value="">
      <select name="status" id="statusmenu">
        <option value="OPEN" style="color: red; font-size: 15px; font-weight: bolder;">OPEN</option>
        <option value="IN PROGRESS" style="color: orange; font-size: 15px; font-weight: bolder;">IN PROGRESS</option>
        <option value="CLOSED" style="color: green; font-size: 15px; font-weight: bolder;">CLOSED</option>
      </select>
      <br>
      <label for="assign_to" style="font-weight: bold;">Assign To:</label>
        <input type="text" id="assign_to" name="assign_to" placeholder="Enter Name" value="">
        <div style="margin-top: 10px;"> <!-- Adjust the margin-top value as needed -->
        <div class="Text-center">
          <button id="applybutton" class="btn btn-success" style="color: white; font-family: 'Inter Tight', sans-serif; font-size: 13px; font-weight: bolder; line-height: 1.8">Apply</button>
          <a href="/dashboard" class="btn btn-warning" style="color: #fff; font-family: 'Inter Tight', sans-serif; line-height: 1.4">BACK</a>
        </div>
      </div>
        <script type="text/javascript">
          document.addEventListener("DOMContentLoaded", function() {
            const raqid = document.getElementById("requistionid");
            const searchParams = new URLSearchParams(window.location.search);
            raqid.value = searchParams.get('requistionsubject_id');
      
            // Adding event listener to the Apply button
            const applyButton = document.getElementById("applyButton");
            applyButton.addEventListener("click", function() {
              // Update status
              const statusMenu = document.getElementById("statusmenu");
              const selectedStatus = statusMenu.options[statusMenu.selectedIndex].value;
              // Simulating an update to the server (replace with actual update logic)
              console.log("Updated status:", selectedStatus);
      
              // Update Assign To field
              const assignToField = document.getElementById("assign_to");
              const newAssignToValue = "Updated Assignee"; // Replace this with the value you want to set
              assignToField.value = newAssignToValue;
              // Simulating an update to the server (replace with actual update logic)
              console.log("Updated Assign To:", newAssignToValue);
        
            // Update comment field
      //       const commentField = document.getElementById("comment");
      //       const newcommentValue = "Updated comment"; // Replace this with the value you want to set
      //       commentField.value = newcommentValue;
              // Simulating an update to the server (replace with actual update logic)
      //       console.log("Updated comment:", newcommentValue);
            });
          });
        </script>
      </form>
    </br>
    </div>
  </div>
</body>
{% endblock content %}



